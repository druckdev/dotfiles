- shell:
    -
      command: git submodule update --init --recursive --jobs 8 --depth 1 2>&1 | grep "Cloning into"
      description: Pulling all submodules
      stdout: true
    -
      command: /bin/sh -c 'tmpd="$(mktemp -d)"; for file in .config/*; do [ ! -e "$HOME/$file" ] || mv "$HOME/$file" "$tmpd"; done; rmdir "$tmpd" 2>/dev/null && echo "Nothing to archive" || { name="existing-$(date +"%s").tar.gz"; tar czvf "$name" "$tmpd" && rm -rf "$tmpd" && echo "$name created"; }'
      description: Archiving all files in ~/.config before overwriting them
      stdout: true
      stderr: true
      quiet: true
    -
      command: .config/zsh/plugins/fzf/install --bin
      description: Pulling fzf binary
- link:
    ~/.Xmodmap:
        path: .Xmodmap
    ~/.Xresources:
        path: .Xresources
    ~/.zshenv:
        path: .zshenv
    ~/.config/:
        create: true
        glob: true
        path: .config/*
    ~/.local/bin/:
        create: true
        glob: true
        path: .local/bin/*
    ~/.local/share/man/man1/fzf.1:
        create: true
        path: .config/zsh/plugins/fzf/man/man1/fzf.1
    ~/.local/share/nvim/site/pack:
        create: true
        path: .config/vim/pack
